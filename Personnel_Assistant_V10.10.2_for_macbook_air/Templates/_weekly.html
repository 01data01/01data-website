<div class="weekly-view">
    <h4 class="text-center mb-4">Week of {{ week_start.strftime('%B %d, %Y') }}</h4>
    <div class="grid grid-cols-7 gap-4">
        {% for i in range(7) %}
            {% set day = week_start + timedelta(days=i) %}
            {% set date_str = day.strftime('%Y-%m-%d') %}
            <div class="border rounded-lg p-2 {% if day.date() == current_date.date() %}bg-blue-50{% else %}bg-white{% endif %}">
                <div class="font-medium text-center mb-2">
                    {{ day.strftime('%a %d') }}
                </div>
                {% if events[date_str] %}
                    <div class="space-y-2">
                        {% for event in events[date_str] %}
                            <div class="event-item p-2 rounded {% if event.priority == 1 %}bg-red-50{% elif event.priority == 2 %}bg-yellow-50{% else %}bg-green-50{% endif %}">
                                <div class="flex items-start justify-between">
                                    <div class="flex-grow">
                                        <div class="text-sm font-medium {% if event.status == 'done' %}line-through text-gray-500{% endif %}">
                                            {{ event.time }} - 
                                            {% if event.priority == 1 %}âš¡{% endif %}
                                            {{ event.description }}
                                        </div>
                                        {% if event.notes %}
                                        <div class="text-xs text-gray-600 mt-1 line-clamp-2 whitespace-pre-wrap {% if event.status == 'done' %}line-through{% endif %}">
                                            {{ event.notes }}
                                        </div>
                                        {% endif %}
                                        {% if event.reminders %}
                                        <div class="text-xs text-gray-600 mt-1 {% if event.status == 'done' %}line-through{% endif %}">
                                            ğŸ”” {{ event.reminders|length }} reminder{{ 's' if event.reminders|length > 1 }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="ml-2">
                                        <input type="checkbox" 
                                               class="form-checkbox h-4 w-4 text-blue-600"
                                               {% if event.status == 'done' %}checked{% endif %}
                                               onchange="updateTaskStatus('{{ event.id }}', this.checked ? 'done' : 'todo')">
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>